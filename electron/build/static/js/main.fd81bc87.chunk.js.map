{"version":3,"sources":["msg_type.js","msg_history.js","connection_icon.js","navbar.js","clear_history.js","download_history.js","console_line.js","send_button.js","sendButtonsGroup.js","app.js","index.js"],"names":["MsgType","type","className","MessageHistory","url","tx","useState","messageHistory","setMessageHistory","lastMessage","useWebSocket","share","onClose","prev","concat","data","timestamp","Date","onOpen","onReconnectStop","messages","useRef","useEffect","current","addEventListener","event","target","currentTarget","scroll","top","scrollHeight","behavior","style","height","id","ref","map","message","idx","display","flexWrap","width","date","format","ConnectionIcon","readyState","ReadyState","CONNECTING","CLOSED","CLOSING","OPEN","UNINSTANTIATED","Navbar","default_url","url_setter","useLocalStorage","url_stored","storeUrl","setUrl","url_edited","setUrlEdited","handleKeyDown","useCallback","e","key","preventDefault","blur","defaultValue","onKeyDown","onChange","value","ClearHistoryButton","onClick","element","document","querySelector","lastChild","removeChild","class","DownloadHistoryButton","downloadTxtFile","history","items","children","forEach","item","header","textContent","console","log","createElement","file","Blob","href","URL","createObjectURL","download","body","appendChild","click","ConsoleLine","send","rs","setMessage","handleClickSendMessage","send_disabled","setSendDisabled","length","placeholder","aria-label","disabled","SendButton","storage_key","label","group_focused","group_set_focused","setItem","setDisabled","focused","setFocused","handleDocKeyDown","ev","removeEventListener","onFocus","onBlur","SendButtonGroup","App","wsUrl","setWsUrl","shouldReconnect","sendMessage","sentMessage","setSentMessage","msg","toISOString","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.fd81bc87.chunk.js","sourcesContent":["import React from 'react';\n\nfunction MsgType({type}) \n{\n  switch (type)\n  {\n    case \"tx\":\n      return <i className=\"bi bi-arrow-left-circle text-primary\"></i>;\n    case \"rx\":\n      return <i className=\"bi bi-arrow-right-circle text-warning\"></i>;\n    case \"open\":\n      return <i className=\"bi bi-check-circle text-success\"></i>;\n    case \"close\":\n      return <i className=\"bi bi-x-circle text-danger\"></i>;\n    default:\n      return <div>?</div>;\n  }\n};\n\nexport default MsgType;","import React, { useState, useEffect, useRef } from 'react';\nimport useWebSocket from 'react-use-websocket';\nimport MsgType from './msg_type';\nimport Moment from 'react-moment';\n\nfunction MessageHistory({url, tx}) \n{\n  const [messageHistory, setMessageHistory] = useState([]);\n  const {lastMessage} = useWebSocket(url, {\n    share: true,\n    onClose: () => {\n      setMessageHistory(prev => prev.concat({data: `Socket closed: ${url}`, type: \"close\", timestamp: new Date()}));\n    },\n    onOpen: () => {\n      setMessageHistory(prev => prev.concat({data: `Socket opened: ${url}`, type: \"open\", timestamp: new Date()}));\n    },\n    onReconnectStop: () => {\n      setMessageHistory(prev => prev.concat({data: `Reconnection limit reached: ${url}`, type: \"close\", timestamp: new Date()}));\n    }\n  });\n  const messages = useRef(null);\n\n  useEffect(() => {\n    if (tx == null) return;\n    setMessageHistory(prev => prev.concat({data: tx.data, type: \"tx\", timestamp: tx.timestamp}));\n  }, [tx, setMessageHistory]);\n\n  useEffect(() => {\n    if(lastMessage == null) return;\n    setMessageHistory(prev => prev.concat({data: lastMessage.data, type: \"rx\", timestamp: new Date()}));\n  }, [lastMessage, setMessageHistory]);\n\n\n  useEffect(() => {\n    if (messages) {\n      messages.current.addEventListener('DOMNodeInserted', event => {\n        const { currentTarget: target } = event;\n        target.scroll({ top: target.scrollHeight, behavior: 'smooth' });\n      });\n    }\n  }, [messages])\n\n  return (\n    <div className=\"container-xxl pt-3 px-0\">\n      <div className=\"card\" style={{height: \"calc(100vh - 142px)\"}} >\n        <div id=\"msg-history\" className=\"card-body mh-100 overflow-auto p-3 striped-list\" ref={messages}>\n              {messageHistory.map((message, idx) => \n              <div className=\"msg-line\" style={{display: \"flex\", flexWrap: \"nowrap\"}} key={idx}>\n                <div className=\"msg-header font-monospace mr-2\" style={{width: \"calc(14.85em)\"}}><Moment date={message.timestamp} format=\"YY-MM-DD HH:mm:ss.SSS\" />&nbsp;<MsgType type={message.type} /></div> \n                <div className=\"msg-event font-monospace\" style={{width: \"calc(100% - 14.85em)\"}}>{message.data}</div>\n              </div>)}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default MessageHistory;","import React from 'react';\nimport useWebSocket, {ReadyState} from 'react-use-websocket';\n\nfunction ConnectionIcon({url}) \n{\n  const {readyState} = useWebSocket(url,{share: true});\n\n  switch (readyState)\n  {\n    case ReadyState.CONNECTING:\n      return <i className=\"bi bi-question-circle text-warning\"></i>;\n    case ReadyState.CLOSED:\n      return <i className=\"bi bi-x-circle text-danger\"></i>;\n    case ReadyState.CLOSING:\n      return <i className=\"bi bi-x-circle text-danger\"></i>;\n    case ReadyState.OPEN:\n      return <i className=\"bi bi-check-circle text-success\"></i>;\n    case ReadyState.UNINSTANTIATED:\n      return <i className=\"bi bi-x-circle text-danger\"></i>;\n    default:\n      return <div>?</div>;\n  }\n};\n\nexport default ConnectionIcon;","import React, { useState, useCallback } from 'react';\nimport useLocalStorage from 'react-use-localstorage';\nimport ConnectionIcon from './connection_icon';\n\nfunction Navbar({default_url, url_setter}) \n{\n  const [url_stored, storeUrl] = useLocalStorage(\"weboscket_url\", default_url);\n  const [url, setUrl] = useState(url_stored);\n  const [url_edited, setUrlEdited] = useState(url);\n  const handleKeyDown = useCallback( (e) => { \n    if(e.key === \"Enter\")\n    {\n      storeUrl(url_edited);\n      setUrl(url_edited);\n      url_setter(url_edited);\n      e.preventDefault();\n      e.target.blur();\n    }    \n  },[storeUrl, setUrl, url_setter, url_edited]);\n\n  return (\n    <nav className=\"navbar navbar-light bg-light\">\n      <form className=\"container-fluid w-50\">      \n        <div className=\"input-group\">\n          <span className=\"input-group-text my-auto\" style={{height: '38px'}}>\n            <ConnectionIcon url={url}/>\n          </span>\n          <input type=\"text\" className=\"form-control text-center\" defaultValue={url} onKeyDown={e => handleKeyDown(e)} onChange={e => {setUrlEdited(e.target.value);}}></input>\n        </div>\n      </form>\n    </nav>\n  );\n};\n\nexport default Navbar;","import React, { useCallback } from 'react';\n\nfunction ClearHistoryButton() \n{\n  const onClick = useCallback(() => {\n    const element = document.querySelector('#msg-history');\n    while (element.lastChild) {\n      element.removeChild(element.lastChild);\n  }\n  }, []);\n\n  return (\n      <button className=\"btn btn-outline-danger\" type=\"button\" onClick={onClick}><i class=\"bi bi-eraser\"></i></button>\n  );    \n};\n\nexport default ClearHistoryButton;","import React, { useCallback } from 'react';\n\nfunction DownloadHistoryButton() \n{\n  const downloadTxtFile = useCallback(() => \n  {\n    let history = \"\";\n    const items = document.querySelector('#msg-history').children;\n    const listArray = [...items];\n    listArray.forEach((item) => {\n      const header = item.querySelector('.msg-header');\n      const event = item.querySelector('.msg-event');\n      history+=header.textContent;\n      history+=event.textContent;\n      history+=\"\\n\";\n    });\n\n    console.log(history);\n    const element = document.createElement(\"a\");\n    const file = new Blob([history], {type: 'text/plain'});\n    element.href = URL.createObjectURL(file);\n    element.download = \"websocket_log.txt\";\n    document.body.appendChild(element); // Required for this to work in FireFox\n    element.click();\n  }, []);\n\n  return (\n      <button className=\"btn btn-outline-primary\" type=\"button\" onClick={downloadTxtFile}><i class=\"bi bi-arrow-down-circle\"></i></button>\n  );    \n};\n\nexport default DownloadHistoryButton;","import React, { useCallback, useEffect, useState } from 'react';\nimport {ReadyState} from 'react-use-websocket';\nimport ClearHistoryButton from './clear_history';\nimport DownloadHistoryButton from './download_history';\n\nfunction ConsoleLine({send, rs}) \n{\n  const [message, setMessage] = useState(\"\");\n  const handleClickSendMessage = useCallback((e) => {\n    send(message);\n    e.preventDefault();\n  }, [send, message]);\n  const [send_disabled, setSendDisabled] = useState(true);\n  useEffect(() => {\n    if(message.length > 0 && rs === ReadyState.OPEN)\n      setSendDisabled(false);\n    else\n      setSendDisabled(true);\n  }, [message, setSendDisabled, rs]);\n  const handleKeyDown = useCallback( (e) => { \n    if(e.key === \"Enter\")\n    {\n      e.preventDefault();   \n      if(send_disabled === false) send(message);\n    }    \n  },[send, message, send_disabled]);\n\n\n  return (\n    <form className=\"container-xxl pt-2 px-0\">\n      <div className=\"input-group\">\n        <input className=\"form-control\" type=\"text\" placeholder=\"Message\" aria-label=\"default input example\" onKeyDown={e => handleKeyDown(e)} onChange={e => {setMessage(e.target.value);}}></input>\n        <button className=\"btn btn-outline-primary\" type=\"button\" onClick={handleClickSendMessage} disabled={send_disabled}><i className=\"bi bi-send\"></i></button>\n        <DownloadHistoryButton />\n        <ClearHistoryButton />\n      </div>  \n    </form>\n  );\n};\n\nexport default ConsoleLine;","import React, { useCallback, useEffect, useState } from 'react';\nimport {ReadyState} from 'react-use-websocket';\nimport useLocalStorage from 'react-use-localstorage';\n\nfunction SendButton({send, storage_key, readyState, label, group_focused, group_set_focused}) \n{\n  const [item, setItem] = useLocalStorage(storage_key);\n  const [message, setMessage] = useState(item);\n  const [disabled, setDisabled] = useState(true);\n  const [focused, setFocused] = useState(false);\n  const handleClickSendMessage = useCallback(() => {if(message.length > 0) send(message)}, [send, message]);\n  const handleDocKeyDown = useCallback((ev) => {if(label === ev.key && message.length > 0 && !focused && !group_focused) send(message);}, [message, label, send, focused, group_focused])\n  const handleKeyDown = useCallback( (e) => { \n    if(e.key === \"Enter\")\n    {\n      e.preventDefault();   \n      if(disabled === false)\n      {\n        setItem(message);\n        send(message);\n      }\n    }\n  },[send, message, disabled, setItem]);\n\n  useEffect(() => {\n    setDisabled(readyState !== ReadyState.OPEN);\n  }, [readyState, setDisabled]);\n\n  useEffect(() => {\n    group_set_focused(focused)\n  }, [focused, group_set_focused]);\n\n  useEffect(() =>\n  {\n    document.addEventListener(\"keydown\", handleDocKeyDown);\n    return () => document.removeEventListener(\"keydown\", handleDocKeyDown);\n  }, [handleDocKeyDown]);\n\n  return (\n    <form className=\"container-xxl pb-2 px-0\">\n      <div className=\"input-group\">\n        <input className=\"form-control\" type=\"text\" placeholder=\"Message\" aria-label=\"default input example\" defaultValue={message} onFocus={() => setFocused(true)} onBlur={() => setFocused(false)} onKeyDown={e => handleKeyDown(e)} onChange={e => {setMessage(e.target.value); setItem(e.target.value);}}></input>\n        <button className=\"btn btn-outline-primary\" type=\"button\" onClick={handleClickSendMessage} disabled={disabled}><i className=\"bi bi-send\"></i> {label}</button>\n      </div>     \n    </form>\n  );    \n};\n\nexport default SendButton;","import React, { useState } from 'react';\nimport SendButton from './send_button';\n\nfunction SendButtonGroup({send, readyState}) \n{\n  const [focused, setFocused] = useState(false);\n\n\n  return (\n    <div className=\"container-fluid px-0\">\n      <div className=\"row row-cols-1\">\n        <div className=\"col px-1 pb-1\"><SendButton send={send} readyState={readyState} storage_key=\"send_btn_0\" label=\"0\" group_set_focused={setFocused} group_focused={focused}/></div>\n        <div className=\"col p-1\"><SendButton send={send} readyState={readyState} storage_key=\"send_btn_1\" label=\"1\" group_set_focused={setFocused} group_focused={focused}/></div>\n        <div className=\"col p-1\"><SendButton send={send} readyState={readyState} storage_key=\"send_btn_2\" label=\"2\" group_set_focused={setFocused} group_focused={focused}/></div>\n        <div className=\"col p-1\"><SendButton send={send} readyState={readyState} storage_key=\"send_btn_3\" label=\"3\" group_set_focused={setFocused} group_focused={focused}/></div>\n\n        <div className=\"col p-1\"><SendButton send={send} readyState={readyState} storage_key=\"send_btn_4\" label=\"4\" group_set_focused={setFocused} group_focused={focused}/></div>\n        <div className=\"col p-1\"><SendButton send={send} readyState={readyState} storage_key=\"send_btn_5\" label=\"5\" group_set_focused={setFocused} group_focused={focused}/></div>\n        <div className=\"col p-1\"><SendButton send={send} readyState={readyState} storage_key=\"send_btn_6\" label=\"6\" group_set_focused={setFocused} group_focused={focused}/></div>\n\n        <div className=\"col p-1\"><SendButton send={send} readyState={readyState} storage_key=\"send_btn_7\" label=\"7\" group_set_focused={setFocused} group_focused={focused}/></div>\n        <div className=\"col p-1\"><SendButton send={send} readyState={readyState} storage_key=\"send_btn_8\" label=\"8\" group_set_focused={setFocused} group_focused={focused}/></div>\n        <div className=\"col p-1\"><SendButton send={send} readyState={readyState} storage_key=\"send_btn_9\" label=\"9\" group_set_focused={setFocused} group_focused={focused}/></div>\n      </div>\n    </div>    \n  );    \n};\n\nexport default SendButtonGroup;","import { useState } from 'react';\nimport useWebSocket from 'react-use-websocket';\nimport useLocalStorage from 'react-use-localstorage';\nimport MessageHistory from \"./msg_history\";\nimport Navbar from './navbar';\nimport ConsoleLine from './console_line';\nimport SendButtonGroup from './sendButtonsGroup';\n\nconst default_url = 'ws://localhost';\n\nfunction App() \n{ \n  const [url_stored] = useLocalStorage(\"weboscket_url\", default_url);\n  const [wsUrl, setWsUrl] = useState(url_stored);\n  const {sendMessage, readyState} = useWebSocket(wsUrl, {shouldReconnect: () => true, share: true});\n  const [sentMessage, setSentMessage] = useState();\n  const send = (msg) =>  {\n    setSentMessage({data: msg, timestamp: new Date().toISOString()});\n    sendMessage(msg);\n  }\n\n  return (\n    <div>\n      <Navbar default_url={wsUrl} url_setter={setWsUrl} />    \n      <div className=\"row mb-0 w-100\">\n        <div className=\"col-8 offset-2 mb-0 mr-0 ml-0\">\n          <MessageHistory url={wsUrl} tx={sentMessage}/>\n          <ConsoleLine rs={readyState} send={send}/>\n        </div>        \n        <div className=\"col-2 mt-0 mb-0 mr-0 ml-0 pt-3\">\n          <SendButtonGroup readyState={readyState} send={send}/>\n        </div>\n      </div>      \n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './app';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}